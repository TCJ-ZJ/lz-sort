(function(e){var c="lz-sort"+new Date().getTime();e.extend({isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]";},isObject:function(f){return Object.prototype.toString.call(f)==="[object Object]";
},checkkit:function(){var h=false,g=new RegExp("IE"),f=(function(){var j=navigator.userAgent,i,k=j.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];
if(/trident/i.test(k[1])){i=/\brv[ :]+(\d+)/g.exec(j)||[];return["IE ",(i[1]||"")];}if(k[1]==="Chrome"){i=j.match(/\b(OPR|Edge)\/(\d+)/);if(i!=null){return i.slice(1);
}}k=k[2]?[k[1],k[2]]:[navigator.appName,navigator.appVersion,"-?"];if((i=j.match(/version\/(\d+)/i))!=null){k.splice(1,1,i[1]);}return k;})();if(g.test(f[0])){+f[1]<11&&(h=true);
}else{if(f[0]=="Chrome"){+f[1]<43&&(h=true);}else{if(f[0]=="Firefox"){+f[1]<43&&(h=true);}else{if(f[0]=="OPR"){+f[1]<40&&(h=true);}else{if(f[0]=="Safari"){+f[1]<8&&(h=true);
}}}}}return h;}});var b=function(f){this.$ele=e(f);this.param=this.$ele.data("lzsort-param");this.status=this.$ele.data("lzsort-status");};b.prototype.setEvent=function(){var f=this,g=this.param;
if(e.isArray(g.event)){e.each(g.event,function(h,i){f[i]&&f[i]();});}else{f[g.event]&&f[g.event]();}};b.prototype.drag=function(){var h=this.$ele,g=h.get(0),f=this.status,i=this.param;
h.children().on("mousedown",function(j){j.preventDefault();j.stopPropagation();if(f.myflag){f.mousex=j.pageX;f.mousey=j.pageY;f.beforePos=e(this).index();
f.afterPos=e(this).index();f.elem=e(this);f.posx=e(this).position().left;f.posy=e(this).position().top;g.sortexcute.setBlock(e(this));e(this).css("opacity",i.opacity);
f.dragFlag=true;}});h.on("mousemove",function(q){q.preventDefault();q.stopPropagation();if(f.myflag&&f.dragFlag){var p=null,j=q.pageX-f.mousex+f.posx,r=q.pageY-f.mousey+f.posy;
f.block.css({top:r,left:j});if(f.kit){f.block.hide();p=document.elementFromPoint(q.clientX,q.clientY);f.block.show();}else{p=q.target;}if(e(p).hasClass(c)&&e(p).index()!==f.afterPos&&!f.onprogress){f.onprogress=true;
var o=f.elem.get(0).getBoundingClientRect(),n=p.getBoundingClientRect(),m=e(p).index();var l=g.sortexcute.doMove(p);l&&(f.afterPos=m);if(i.animation&&!f.kit&&l){g.sortexcute.doEffect(o,f.elem.get(0));
g.sortexcute.doEffect(n,p);}else{f.onprogress=false;}}}});e(document).on("mousemove",function(k){k.preventDefault();if(f.dragFlag&&f.myflag){var j=k.pageX-f.mousex+f.posx,l=k.pageY-f.mousey+f.posy;
f.block.css({top:l,left:j});}});e(document).on("mouseup",function(j){j.preventDefault();if(f.dragFlag&&f.myflag){f.dragFlag=false;f.block.remove();f.block=null;
f.elem.css("opacity",1);g.sortexcute.setaffiliates();}});};b.prototype.wheel=function(){var h=this.$ele,g=h.get(0),f=this.status,i=this.param;h.children().on("mousewheel DOMMouseScroll",function(n){n.preventDefault();
n.stopPropagation();if(f.myflag&&!f.dragFlag&&!f.onprogress){var m=null;f.onprogress=true;f.beforePos=e(this).index();f.afterPos=e(this).index();f.elem=e(this);
var o=(n.originalEvent.wheelDelta&&(n.originalEvent.wheelDelta>0?1:-1))||(n.originalEvent.detail&&(n.originalEvent.detail>0?-1:1));if(o>0){m=e(n.target).prev();
}else{if(o<0){m=e(n.target).next();}}if(m.length!=0){var l=f.elem.get(0).getBoundingClientRect(),k=m.get(0).getBoundingClientRect(),j=e(m).index();if(j>f.afterPos){e(m).after(f.elem);
}else{if(j<f.afterPos){e(m).before(f.elem);}}f.afterPos=j;if(i.animation&&!f.kit){g.sortexcute.doEffect(l,f.elem.get(0));g.sortexcute.doEffect(k,m.get(0));
}else{f.onprogress=false;}g.sortexcute.setaffiliates();}else{f.onprogress=false;}}});};var a=function(f){this.$ele=e(f),this.param=this.$ele.data("lzsort-param");
this.status=this.$ele.data("lzsort-status");};a.prototype.setBlock=function(h){var g=this.$ele,j=this.param,f=this.status,i=e(h).clone();i.css({position:"absolute",top:e(h).position().top,left:e(h).position().left,"pointer-events":"none"}).addClass("lzsort-helper").removeClass(c).appendTo(g);
f.block=e(".lzsort-helper").eq(0);};a.prototype.doMove=function(i){var h=this.$ele,f=this.status,j=this.param;var g=e(i).index();if(j.axis==="y"){if(g>f.afterPos&&e(i).offset().left===f.elem.offset().left){e(i).after(f.elem);
return true;}else{if(g<f.afterPos&&e(i).offset().left===f.elem.offset().left){e(i).before(f.elem);return true;}}}else{if(j.axis==="x"){if(g>f.afterPos&&e(i).offset().top===f.elem.offset().top){e(i).after(f.elem);
return true;}else{if(g<f.afterPos&&e(i).offset().top===f.elem.offset().top){e(i).before(f.elem);return true;}}}else{if(g>f.afterPos){e(i).after(f.elem);
return true;}else{if(g<f.afterPos){e(i).before(f.elem);return true;}}}}return false;};a.prototype.doEffect=function(i,h){var g=this.$ele,f=this.status,k=this.param;
var j=h.getBoundingClientRect();e(h).css({transition:"none",transform:"translate("+(i.left-j.left)+"px,"+(i.top-j.top)+"px)"});h.offsetWidth;e(h).css("transition","all "+k.duration+"ms "+k.effect+" "+k.delay+"ms");
e(h).css("transform","translate(0,0)");clearTimeout(h.animated);h.animated=setTimeout(function(){e(h).css({transition:"",transform:""});f.onprogress=false;
h.animated=null;},k.duration);};a.prototype.setaffiliates=function(){var h=this.status,g=h.afterPos,f=h.beforePos;e.each(e(h.affiliates),function(i,j){if(f>g){e(j).children().eq(g).before(e(j).children().eq(f));
}else{if(f<g){e(j).children().eq(g).after(e(j).children().eq(f));}}});};var d=function(g,f){this.$ele=e(g);this.$ele.data("lzsort-param",this.initParam(f));
this.$ele.data("lzsort-status",{block:null,dragFlag:false,elem:null,beforePos:0,afterPos:0,affiliates:"",posx:0,posy:0,mousex:0,mousey:0,kit:false,onprogress:false,myflag:false});
};d.prototype.layout=function(){var g=this.$ele,h=g.data("lzsort-param"),f=g.data("lzsort-status");f.kit=e.checkkit();if(g.css("position")==="static"){g.css("position","relative");
}f.affiliates=h.affiliates.join(",");g.children().addClass(c);if(h.wheel){h.event.push("wheel");}};d.prototype.initEvent=function(){var g=this.$ele,f=new b(g);
f.setEvent();};d.prototype.initParam=function(f){var g={axis:"xy",opacity:0,animation:true,effect:"ease",delay:0,duration:100,affiliates:[],wheel:false,event:["drag"]};
if(e.isArray(f)){g.affiliates=f;}else{if(typeof f==="string"){g.axis=f;}else{if(typeof f==="boolean"){g.aniamation=f;}else{if(e.isObject(f)){g=e.extend({},g,f);
}}}}if(this.$ele.data("lzsort-param")){g=e.extend({},g,this.$ele.data("lzsort-param"));}g.axis=(g.axis=="x"||g.axis=="y"||g.axis=="xy"||g.axis=="yx")?g.axis:"xy";
g.animation=(g.animation===false)?false:true;isNaN(g.delay)&&(g.delay=0);isNaN(g.duration)&&(g.duration=300);isNaN(g.opacity)&&(g.opacity=0);g.wheel=(g.wheel===true)?true:false;
return g;};e.fn.lzsortTool=function(){var g=e(this);var f={status:g.data("lzsort-status"),start:function(){if(!!this.status){this.status.myflag=true;}},end:function(){if(!!this.status){this.status.myflag=false;
}}};return f;};e.fn.lzsort=function(f){var g=e(this);e.each(g,function(i,j){var h=new d(j,f);j.sortexcute=new a(j);h.layout();h.initEvent();});return g;
};})(jQuery);